<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Business Card</title>
<meta name="robots" content="noindex,nofollow,noarchive" />
<style>
  :root{
    --ink:#002b5c;
    --muted:#6b7a90;
    --blue-1:#e6f3ff;
    --blue-2:#b3daff;
    --blue-3:#0073e6;
  }

  body{
    margin:0;
    font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Dubai","Cairo",sans-serif;
    background:url("https://cdnp.flypgs.com/files/Sehirler-long-tail/Sharjah/sharjah-gezi-rehberi.jpg") no-repeat center center fixed;
    background-size:cover;
  }

  .wrap{max-width:460px;margin:0 auto;padding:18px}
  .card{
    background:#fff;
    border-radius:18px;
    padding:22px 18px 26px;
    border:1px solid #e5e5e5;
    box-shadow:0 12px 28px rgba(0,0,0,.18);
  }

  /* Logo – square, flat (no shadow) */
  .logo-wrap{width:170px;height:170px;margin:0 auto 10px;display:grid;place-items:center}
  .logo{width:170px;height:170px;border-radius:0;overflow:hidden}
  .logo img{width:100%;height:100%;object-fit:contain;display:block;background:transparent}

  .name{ text-align:center; font-size:30px; font-weight:900; margin:10px 8px 6px; color:var(--ink); }
  .designation{ text-align:center; font-weight:700; color:#00509e; margin-bottom:12px }

  .dash{margin:8px auto 14px; width:100%; height:1px; background:#eee}

  /* Buttons */
  .list{display:grid; gap:12px}
  .btn{
    display:flex; align-items:center; gap:12px;
    padding:14px;
    border-radius:12px;
    background:var(--blue-1);
    border:1px solid var(--blue-2);
    text-decoration:none;
    color:var(--ink);
    transition:background .15s, transform .12s;
  }
  .btn:hover{ background:#d4ebff; transform:translateY(-1px); }

  .ico{
    width:40px;height:40px;display:grid;place-items:center;flex-shrink:0;
    background:#fff;border:1px solid var(--blue-2);border-radius:10px;
    font-size:18px;line-height:1;
  }

  .meta{flex:1;display:flex;flex-direction:column}
  .meta .lbl{font-size:13px;font-weight:700;color:#0059b3}
  .meta .val{font-size:17px;font-weight:800;color:var(--ink)}

  /* Direction-aware flow */
  [dir="rtl"] .btn{flex-direction:row-reverse}
  [dir="rtl"] .meta{text-align:right}
  [dir="ltr"] .meta{text-align:left}

  .note{margin-top:14px;text-align:center;font-size:12px;color:#777}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- Fixed logo file kept next to index.html (change path if needed) -->
      <div class="logo-wrap">
        <div class="logo"><img src="Logo.png" alt="Logo"></div>
      </div>

      <!-- Name / Title -->
      <div class="name" id="name">اسمك هنا</div>
      <div class="designation" id="designation">مسمّاك الوظيفي</div>
      <div class="dash"></div>

      <!-- Contact Buttons -->
      <div class="list">
        <a class="btn" id="btnPhone" href="#">
          <div class="ico">📞</div>
          <div class="meta">
            <div class="lbl" id="lblPhone">الهاتف</div>
            <div class="val" id="phoneText">+971 XX XXX XXXX</div>
          </div>
        </a>

        <a class="btn" id="btnSite" href="#" target="_blank" rel="noopener">
          <div class="ico">🌐</div>
          <div class="meta">
            <div class="lbl" id="lblSite">الموقع</div>
            <div class="val" id="siteText">example.com</div>
          </div>
        </a>

        <a class="btn" id="btnEmail" href="#">
          <div class="ico">✉️</div>
          <div class="meta">
            <div class="lbl" id="lblEmail">البريد الإلكتروني</div>
            <div class="val" id="emailText">info@example.com</div>
          </div>
        </a>

        <a class="btn" id="btnMap" href="https://maps.app.goo.gl/ZifwVaEtYV7Ynay79" target="_blank" rel="noopener">
          <div class="ico">📍</div>
          <div class="meta">
            <div class="val" id="lblOpenMap">افتح الخريطة</div>
          </div>
        </a>
      </div>

      <div class="note" id="note">اضغط على أي صف لاتخاذ إجراء (اتصال / زيارة / بريد / خريطة)</div>
    </div>
  </div>

<script>
  const qs = new URLSearchParams(location.search);
  const lang = qs.get('lang') === 'en' ? 'en' : 'ar';   // default Arabic
  const key  = qs.get('emp') || qs.get('id');           // ?emp=Emp1  or  ?id=Emp1

  const $ = (id)=>document.getElementById(id);
  const setText = (id,val)=>{ const el=$(id); if(el) el.textContent = val || '—'; };

  // Switch labels + direction by language
  function localizeLabels(){
    if(lang === 'en'){
      document.documentElement.lang = 'en';
      document.documentElement.dir  = 'ltr';
      setText('lblPhone','Phone');
      setText('lblSite','Website');
      setText('lblEmail','Email');
      setText('lblOpenMap','Open Map');
      setText('note','Tap any row to take action (Call / Visit / Email / Map)');
    }else{
      document.documentElement.lang = 'ar';
      document.documentElement.dir  = 'rtl';
      setText('lblPhone','الهاتف');
      setText('lblSite','الموقع');
      setText('lblEmail','البريد الإلكتروني');
      setText('lblOpenMap','افتح الخريطة');
      setText('note','اضغط على أي صف لاتخاذ إجراء (اتصال / زيارة / بريد / خريطة)');
    }
  }

  function setSiteLink(el, href){
    if(!href){ el.removeAttribute('href'); el.href='#'; $('siteText').textContent='—'; return; }
    try{ const u = new URL(href); el.href = href; $('siteText').textContent = u.host; }
    catch{ el.href = href; $('siteText').textContent = href; }
  }

  async function fetchFirst(urls){
    for(const url of urls){
      try{
        const r = await fetch(url, {cache:'no-store'});
        if(r.ok){ return await r.json(); }
      }catch(e){}
    }
    return null;
  }

  function resolvePaths(key){
    if(!key) return null;
    const p = [];
    if(/\.json$/i.test(key)) p.push(key);
    p.push(`${key}.json`);
    p.push(`employees/${key}.json`);
    return p;
  }

  function bind(emp){
    // Arabic-only JSON is expected; English mode still shows Arabic values (labels switch).
    const name  = emp.nameAr || emp.name || 'اسمك هنا';
    const title = emp.titleAr || emp.title || 'مسمّاك الوظيفي';
    const phone = emp.phone1 || emp.phone || emp.mobile || '+971 XX XXX XXXX';
    const site  = emp.site || emp.website || '#';
    const email = emp.email || 'info@example.com';

    setText('name', name);
    setText('designation', title);
    setText('phoneText', phone);
    setText('emailText', email);

    $('btnPhone').href = phone ? `tel:${phone}` : '#';
    $('btnEmail').href = email ? `mailto:${email}` : '#';
    setSiteLink($('btnSite'), site);

    localizeLabels();
  }

  (async function init(){
    localizeLabels();

    const demo = {
      nameAr:"اسمك هنا",
      titleAr:"مسمّاك الوظيفي",
      phone1:"+971 50 000 0000",
      email:"info@example.com",
      site:"https://www.website.com"
    };

    if(!key){ bind(demo); return; }

    const paths = resolvePaths(key);
    const data  = await fetchFirst(paths) || demo;
    bind(data);
  })();
</script>
</body>
</html>

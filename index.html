<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Business Card</title>
<meta name="robots" content="noindex,nofollow,noarchive" />
<style>
  body{
    margin:0;
    font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Dubai","Cairo",sans-serif;
    background:url("https://cdnp.flypgs.com/files/Sehirler-long-tail/Sharjah/sharjah-gezi-rehberi.jpg") 
               no-repeat center center fixed;
    background-size:cover;
  }
  .wrap{max-width:440px;margin:0 auto;padding:18px}
  .card{
    background:#ffffff;              /* solid white card */
    border-radius:18px;
    padding:22px 18px 26px;
    border:1px solid #ddd;
    box-shadow:0 12px 28px rgba(0,0,0,.25);
    position:relative;
  }
  /* Logo */
  .logo-ring{width:122px;height:122px;margin:6px auto 10px; border:none; box-shadow:none; background:transparent;}
  .logo{width:110px;height:110px;border-radius:50%; background:#fff; overflow:hidden; margin:auto;
        box-shadow:0 6px 18px rgba(0,0,0,.15);}
  .logo img{width:100%;height:100%;object-fit:contain}

  .name{ text-align:center; font-size:28px; font-weight:900; margin:10px 8px 6px; color:#003366; }
  .designation{ text-align:center; font-weight:700; color:#00509e; margin-bottom:12px }

  .dash{margin:8px auto 14px; width:100%; height:1px; background:#eee}

  .list{display:grid; gap:9px}

  /* -------- Buttons: light blue theme -------- */
  .btn{
    display:flex; align-items:center; gap:12px;
    padding:10px 14px;
    border-radius:12px;
    background:#e6f3ff;                  /* light blue background */
    border:1px solid #b3daff;            /* light blue border */
    text-decoration:none;
    color:#004080;                       /* dark blue text */
    box-shadow:0 2px 6px rgba(0,0,0,.05);
    transition:background .15s, transform .12s;
  }
  .btn:hover{
    background:#d4ebff;                  /* slightly darker on hover */
    transform:translateY(-1px);
  }
  .ico{
    width:36px; height:36px; border-radius:8px; display:grid; place-items:center; flex:0 0 36px;
    background:#fff;
    border:1px solid #b3daff;
  }
  .ico svg{width:18px;height:18px;color:#0073e6}  /* icon color */
  .vline{width:1px; height:24px; background:#b3daff}
  .meta .lbl{font-size:12px; color:#0073e6; font-weight:700}
  .meta .val{font-weight:800; font-size:15px; color:#004080}

  .note{margin-top:12px; text-align:center; font-size:12px; color:#666}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- Logo -->
      <div class="logo-ring">
        <div class="logo"><img id="logoImg" alt="Logo"></div>
      </div>

      <!-- Name / Designation -->
      <div class="name" id="name">YOUR NAME</div>
      <div class="designation" id="designation">YOUR DESIGNATION</div>
      <div class="dash"></div>

      <!-- Contact Buttons -->
      <div class="list">
        <a class="btn" id="btnPhone" href="#">
          <div class="ico">
            <svg viewBox="0 0 24 24" fill="none"><path d="M22 16.9v3a2 2 0 0 1-2.2 2 19.9 19.9 0 0 1-8.6-3.1A19.5 19.5 0 0 1 3.2 9.8 19.9 19.9 0 0 1 .1 1.2 2 2 0 0 1 2.1-1h3a2 2 0 0 1 2 1.7c.1 1 .4 2 .7 2.9a2 2 0 0 1-.5 2.1L6.1 7.9a16 16 0 0 0 6 6l1.1-1.1a2 2 0 0 1 2.1-.4c.9.3 1.9.5 2.9.7A2 2 0 0 1 22 16.9Z" fill="currentColor"/></svg>
          </div>
          <div class="vline"></div>
          <div class="meta"><div class="lbl">PHONE</div><div class="val" id="phoneText">+971 XX XXX XXXX</div></div>
        </a>

        <a class="btn" id="btnSite" href="#" target="_blank" rel="noopener">
          <div class="ico"><svg viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 1 0 18A9 9 0 0 1 12 3Zm6.5 7h-3.1c-.2-2-1-3.8-2.4-5.2A7 7 0 0 1 18.5 10Zm-5.4 0H11V5a8 8 0 0 1 1.1 5ZM11 14v5c-1.9-.6-3.3-2.4-3.6-5H11Zm2 0h3.6c-.3 2.6-1.7 4.4-3.6 5v-5Zm-2 0H7.4c.3-2.6 1.7-4.4 3.6-5v5Z" fill="currentColor"/></svg></div>
          <div class="vline"></div>
          <div class="meta"><div class="lbl">WEBSITE</div><div class="val" id="siteText">example.com</div></div>
        </a>

        <a class="btn" id="btnEmail" href="#">
          <div class="ico"><svg viewBox="0 0 24 24"><path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm0 0 8 7 8-7" stroke="currentColor" stroke-width="2" fill="none"/></svg></div>
          <div class="vline"></div>
          <div class="meta"><div class="lbl">EMAIL</div><div class="val" id="emailText">info@example.com</div></div>
        </a>

        <a class="btn" id="btnMap" href="#" target="_blank" rel="noopener">
          <div class="ico"><svg viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7Zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5Z" fill="currentColor"/></svg></div>
          <div class="vline"></div>
          <div class="meta"><div class="lbl">ADDRESS</div><div class="val" id="addrText">Your Address Here, City, State</div></div>
        </a>
      </div>

      <div class="note">Tap any row to take action (Call / Visit / Email / Open Map)</div>
    </div>
  </div>

<script>
  const qs = new URLSearchParams(location.search);
  const empParam = qs.get('emp');          // new: ?emp=Emp1  OR ?emp=staff/Emp1.json
  const idParam  = qs.get('id');           // legacy support: ?id=Emp1
  const key      = empParam || idParam;    // which key to use

  const $ = (id)=>document.getElementById(id);
  const setText = (id,val)=>{ const el=$(id); if(el) el.textContent=val||'â€”'; };

  function setSiteLink(el, href){
    if(!href){ el.removeAttribute('href'); el.href='#'; return; }
    try{ const u = new URL(href); el.href = href; $('siteText').textContent = u.host; }
    catch{ el.href = href; $('siteText').textContent = href; }
  }
  function mapHrefFrom(emp){
    if(typeof emp.lat==='number' && typeof emp.lng==='number')
      return `https://www.google.com/maps/search/?api=1&query=${emp.lat},${emp.lng}`;
    if(emp.mapUrl) return emp.mapUrl;
    const q=encodeURIComponent(emp.addressEn||emp.addressAr||'');
    return `https://www.google.com/maps/search/?api=1&query=${q}`;
  }

  // Try multiple possible JSON paths in order (first that loads wins)
  async function fetchFirst(urls){
    for(const url of urls){
      try{
        const r = await fetch(url, {cache:'no-store'});
        if(r.ok){
          const data = await r.json();
          return {data, used:url};
        }
      }catch(e){ /* ignore and try next */ }
    }
    throw new Error('No JSON found at: ' + urls.join(', '));
  }

  function resolvePaths(key){
    if(!key) return null;
    const paths = [];
    // if user passed a full .json path, use as-is first
    if(/\.json$/i.test(key)) paths.push(key);
    // then try relative (root) e.g., Emp1.json
    paths.push(`${key}.json`);
    // also try employees subfolder e.g., employees/Emp1.json
    paths.push(`employees/${key}.json`);
    return paths;
  }

  function bind(emp){
    // Accept different possible field names smoothly
    $('logoImg').src = emp.logoUrl || emp.logo || 'https://dummyimage.com/400x400/ffffff/cccccc&text=Logo';
    $('logoImg').onerror = () => { $('logoImg').src='https://dummyimage.com/400x400/ffffff/cccccc&text=Logo'; };

    const name = emp.nameEn || emp.nameAr || emp.name || emp.fullName || 'YOUR NAME';
    const title = emp.title || emp.designation || emp.position || '';
    const phone = emp.phone1 || emp.phone || emp.mobile || '';
    const site  = emp.site || emp.website || '';
    const email = emp.email || '';
    const addr  = emp.addressEn || emp.addressAr || emp.address || '';

    setText('name', name);
    setText('designation', title || 'YOUR DESIGNATION');
    setText('phoneText', phone || '+971 XX XXX XXXX');
    setText('emailText', email || 'info@example.com');
    setText('addrText', addr || 'Your Address Here');

    $('btnPhone').href = phone ? `tel:${phone}` : '#';
    $('btnEmail').href = email ? `mailto:${email}` : '#';
    setSiteLink($('btnSite'), site || '#');
    $('btnMap').href = mapHrefFrom(emp);
  }

  (async function init(){
    const demo = {
      nameEn:"YOUR NAME", title:"YOUR DESIGNATION",
      phone:"+971 50 000 0000", email:"info@website.com",
      site:"https://www.website.com",
      addressEn:"Your Address Here, City, State, Pincode",
      logoUrl:"https://dummyimage.com/600x600/ffffff/cccccc&text=LOGO"
    };

    if(!key){ bind(demo); return; }

    const candidates = resolvePaths(key);
    try{
      const {data, used} = await fetchFirst(candidates);
      bind(data);
      // console.log('Loaded employee JSON:', used);
    }catch(err){
      // console.warn(err);
      bind(demo);
    }
  })();
</script>
</body>
</html>
